[1][      debug] Sqlite write daemon: starting up
[1][      debug] Sqlite write daemon: set up complete, waiting for connections
[7][      debug] Sqlite write daemon: process starting, pid= 7
[1][environment] CWD = /build
[1][environment] No .inferconfig file found
[1][environment] Project root = /src
[1][environment] INFER_ARGS =   @/tmp/args.tmp.d97259 --progress-bar-style plain
[1][environment] command line arguments:   infer --reactive --keep-going --project-root=/src
[1][environment]                           -o /out
[1][environment]                           --compilation-database=/src/build/compile_commands.docker.json
[1][environment]                           --skip-analysis-in-path=/src/fuzz/vuln_fuzzer.c
[1][environment] Available memory at startup: 28925 MB
[1][environment] Active checkers: self-in-block (C/C++/ObjC), parameter-not-null-checked (C/C++/ObjC), starvation (C/C++/ObjC, Java), siof (C/C++/ObjC), racerd (C/C++/ObjC, C#/.Net, Java), pulse (C/C++/ObjC, C#/.Net, Erlang, Hack, Java, Python), liveness (C/C++/ObjC), inefficient-keyset-iterator (Java), fragment-retains-view (Java)
[1][environment] Scheduler: restart
[1][environment] Cores used: 9
[1][environment] Infer version v1.2.0
[1][environment] Copyright 2009 - present Facebook. All Rights Reserved.
[1][environment] 
[1][   progress] Capturing using compilation database...
[1][      debug] parsing compilation database from /src/build/compile_commands.docker.json
[1][      debug] created database with 1 entries
[1][      debug] Starting translating 1 files
[1][      debug] 
[1][   progress] Starting translating 1 files
[1][   progress] 









[17][      debug] 
[17][      debug] *** Beginning capture of file /src/src/vuln.c ***
[17][      debug] Elapsed: 306ms.
[17][      debug] GC stats for capture:
[17][      debug]   minor_words: 636237
[17][      debug]   promoted_words: 228277
[17][      debug]   major_words: 239370
[17][      debug]   minor_collections: 1
[17][      debug]   major_collections: 0
[17][      debug]   compactions: 0
[17][      debug]   top_heap_words: 1006592
[17][      debug]   
[17][      debug] GC stats for main_process_full:
[17][      debug]   minor_words: 3.35532e+06
[17][      debug]   promoted_words: 935807
[17][      debug]   major_words: 984560
[17][      debug]   minor_collections: 9
[17][      debug]   major_collections: 1
[17][      debug]   compactions: 0
[17][      debug]   top_heap_words: 1006592
[17][      debug]   

[1][      debug] GC stats for capture:
[1][      debug]   minor_words: 10047
[1][      debug]   promoted_words: 172439
[1][      debug]   major_words: 181146
[1][      debug]   minor_collections: 2
[1][      debug]   major_collections: 2
[1][      debug]   compactions: 1
[1][      debug]   top_heap_words: 1006592
[1][      debug]   
[1][environment] Parallel jobs: 9
[1][   progress] Found 1 (out of 1) source file to analyze in /out
[26][   progress] src/vuln.c starting
[25][   progress] Analysing block of 200 procs, starting with double_free_example
[24][   progress] Analysing block of 200 procs, starting with main
[22][   progress] Analysing block of 200 procs, starting with null_deref_example
[23][   progress] Analysing block of 200 procs, starting with use_after_free_example
[26][   progress] src/vuln.c DONE
[23][   progress] src/vuln.c starting
[23][   progress] src/vuln.c DONE
[22][   progress] src/vuln.c starting
[22][   progress] src/vuln.c DONE
[1][      debug] Backend stats:
[1][      debug]   summary_file_try_load= 53
[1][      debug]   summary_read_from_disk= 7
[1][      debug]   summary_cache_hits= 14 (20%)
[1][      debug]   summary_cache_misses= 53
[1][      debug]   ondemand_procs_analyzed= 4
[1][      debug]   proc_locker_lock_time_user= 0.00245900
[1][      debug]   proc_locker_lock_time_sys= 0.00178800
[1][      debug]   proc_locker_lock_time_wall= 0.01015012
[1][      debug]   proc_locker_lock_time_oncpu_pct= 42%
[1][      debug]   proc_locker_unlock_time_user= 0.00045600
[1][      debug]   proc_locker_unlock_time_sys= 0.00000900
[1][      debug]   proc_locker_unlock_time_wall= 0.00184954
[1][      debug]   proc_locker_unlock_time_oncpu_pct= 25%
[1][      debug]   restart_scheduler_useful_time_user= 0.39913800
[1][      debug]   restart_scheduler_useful_time_sys= 0.04257700
[1][      debug]   restart_scheduler_useful_time_wall= 0.61310796
[1][      debug]   restart_scheduler_useful_time_oncpu_pct= 72%
[1][      debug]   restart_scheduler_total_time_user= 0.42982900
[1][      debug]   restart_scheduler_total_time_sys= 0.05073400
[1][      debug]   restart_scheduler_total_time_wall= 0.65222413
[1][      debug]   restart_scheduler_total_time_oncpu_pct= 74%
[1][      debug]   pulse_aliasing_contradictions= 0
[1][      debug]   pulse_args_length_contradictions= 0
[1][      debug]   pulse_captured_vars_length_contradictions= 0
[1][      debug]   pulse_disjuncts_dropped= 0
[1][      debug]   pulse_interrupted_loops= 0
[1][      debug]   pulse_summaries_contradictions= 0
[1][      debug]   pulse_summaries_unsat_for_caller= 3
[1][      debug]   pulse_summaries_unsat_for_caller_percent= 75
[1][      debug]   pulse_summaries_with_some_unreachable_nodes= 1
[1][      debug]   pulse_summaries_with_some_unreachable_nodes_percent= 25
[1][      debug]   pulse_summaries_with_some_unreachable_returns= 0
[1][      debug]   pulse_summaries_with_some_unreachable_returns_percent= 0.0%
[1][      debug]   pulse_summaries_count= [2 -> 2, 3 -> 1, 7 -> 1]
[1][      debug]   pulse_summaries_total_disjuncts= 14
[1][      debug]   pulse_summaries_count_0_continue_program= 0
[1][      debug]   pulse_summaries_count_0_percent= 0
[1][      debug]   topl_reachable_calls= 0
[1][      debug]   timeouts= 0
[1][      debug]   timings= timings for liveness:
[1][      debug]     p10: 0.000169s p20: 0.000663s p30: 0.001321s p40: 0.001877s
[1][      debug]     p50: 0.002131s p60: 0.002385s p70: 0.002495s p80: 0.002559s
[1][      debug]     p90: 0.002606s p95: 0.002606s p96: 0.002606s p97: 0.002606s
[1][      debug]     p98: 0.002606s p99: 0.002606s p99.9: 0.002606s p99.99: 0.002606s 
[1][      debug]   timings for parameter-not-null-checked:
[1][      debug]     p10: 0.000076s p20: 0.000530s p30: 0.000831s p40: 0.000977s
[1][      debug]     p50: 0.001123s p60: 0.001249s p70: 0.001274s p80: 0.001511s
[1][      debug]     p90: 0.001958s p95: 0.002032s p96: 0.002032s p97: 0.002032s
[1][      debug]     p98: 0.002032s p99: 0.002032s p99.9: 0.002032s p99.99: 0.002032s 
[1][      debug]   timings for pulse:
[1][      debug]     p10: 0.027564s p20: 0.028633s p30: 0.030059s p40: 0.031623s
[1][      debug]     p50: 0.033602s p60: 0.035582s p70: 0.039258s p80: 0.043498s
[1][      debug]     p90: 0.046679s p95: 0.046679s p96: 0.046679s p97: 0.046679s
[1][      debug]     p98: 0.046679s p99: 0.046679s p99.9: 0.046679s p99.99: 0.046679s 
[1][      debug]   timings for racerd:
[1][      debug]     p10: 0.000808s p20: 0.001141s p30: 0.001584s p40: 0.002174s
[1][      debug]     p50: 0.003204s p60: 0.004234s p70: 0.004717s p80: 0.005018s
[1][      debug]     p90: 0.005243s p95: 0.005243s p96: 0.005243s p97: 0.005243s
[1][      debug]     p98: 0.005243s p99: 0.005243s p99.9: 0.005243s p99.99: 0.005243s 
[1][      debug]   timings for self-in-block:
[1][      debug]     p10: 0.000000s p20: 0.000007s p30: 0.000030s p40: 0.000052s
[1][      debug]     p50: 0.000064s p60: 0.000072s p70: 0.000079s p80: 0.000324s
[1][      debug]     p90: 0.000806s p95: 0.000886s p96: 0.000886s p97: 0.000886s
[1][      debug]     p98: 0.000886s p99: 0.000886s p99.9: 0.000886s p99.99: 0.000886s 
[1][      debug]   timings for siof:
[1][      debug]     p10: 0.000317s p20: 0.000681s p30: 0.001167s p40: 0.001532s
[1][      debug]     p50: 0.001535s p60: 0.001538s p70: 0.001613s p80: 0.001713s
[1][      debug]     p90: 0.001787s p95: 0.001787s p96: 0.001787s p97: 0.001787s
[1][      debug]     p98: 0.001787s p99: 0.001787s p99.9: 0.001787s p99.99: 0.001787s 
[1][      debug]   timings for starvation:
[1][      debug]     p10: 0.000878s p20: 0.002673s p30: 0.003817s p40: 0.004312s
[1][      debug]     p50: 0.004793s p60: 0.005195s p70: 0.005214s p80: 0.005275s
[1][      debug]     p90: 0.005378s p95: 0.005395s p96: 0.005395s p97: 0.005395s
[1][      debug]     p98: 0.005395s p99: 0.005395s p99.9: 0.005395s p99.99: 0.005395s 
[1][      debug]   timings for preanalysis:
[1][      debug]     p10: 0.000966s p20: 0.003686s p30: 0.005806s p40: 0.007327s
[1][      debug]     p50: 0.036804s p60: 0.066556s p70: 0.069721s p80: 0.071385s
[1][      debug]     p90: 0.071547s p95: 0.071574s p96: 0.071574s p97: 0.071574s
[1][      debug]     p98: 0.071574s p99: 0.071574s p99.9: 0.071574s p99.99: 0.071574s 
[1][      debug]   
[1][      debug]   longest_proc_duration_heap= [
[1][      debug]   186112us: src/vuln.c: null_deref_example
[1][      debug]   184531us: src/vuln.c: use_after_free_example
[1][      debug]   184444us: src/vuln.c: double_free_example
[1][      debug]   51313us: src/vuln.c: main
[1][      debug]   ]
[1][      debug]   process_times_user= 0.45331800
[1][      debug]   process_times_sys= 0.06190400
[1][      debug]   process_times_wall= 2.59233812
[1][      debug]   process_times_oncpu_pct= 20%
[1][      debug]   useful_times_user= 0.45046800
[1][      debug]   useful_times_sys= 0.06116800
[1][      debug]   useful_times_wall= 0.70225588
[1][      debug]   useful_times_oncpu_pct= 73%
[1][      debug]   spec_store_times_user= 0.19502400
[1][      debug]   spec_store_times_sys= 0.00300800
[1][      debug]   spec_store_times_wall= 0.36857067
[1][      debug]   spec_store_times_oncpu_pct= 54%
[1][      debug]   
[1][      debug] GC stats for backend_stats.gc_stats_add.:
[1][      debug]   minor_words: 3.07678e+06
[1][      debug]   promoted_words: 350224
[1][      debug]   major_words: 368835
[1][      debug]   minor_collections: 1
[1][      debug]   major_collections: 0
[1][      debug]   compactions: 0
[1][      debug]   top_heap_words: 9384448
[1][      debug]   
[1][      debug] GC stats for backend_stats.gc_stats_max.:
[1][      debug]   minor_words: 1.31605e+06
[1][      debug]   promoted_words: 350224
[1][      debug]   major_words: 355087
[1][      debug]   minor_collections: 1
[1][      debug]   major_collections: 0
[1][      debug]   compactions: 0
[1][      debug]   top_heap_words: 1331712
[1][      debug]   
[1][      debug] Average over 9 processes
[1][      debug] GC stats for backend_stats.gc_stats_average.:
[1][      debug]   minor_words: 341864
[1][      debug]   promoted_words: 38913.8
[1][      debug]   major_words: 40981.7
[1][      debug]   minor_collections: 0
[1][      debug]   major_collections: 0
[1][      debug]   compactions: 0
[1][      debug]   top_heap_words: 1042716
[1][      debug]   
[1][      debug] Analysis phase finished in 324ms
[1][      debug] backend_stats.scheduler_process_analysis_time_user= 0.02735800
[1][      debug] backend_stats.scheduler_process_analysis_time_sys= 0.02308500
[1][      debug] backend_stats.scheduler_process_analysis_time_wall= 0.32357979
[1][      debug] backend_stats.scheduler_process_analysis_time_oncpu_pct= 16%
[1][      debug] GC stats for analysis_scheduler:
[1][      debug]   minor_words: 526892
[1][      debug]   promoted_words: 2321
[1][      debug]   major_words: 316383
[1][      debug]   minor_collections: 1
[1][      debug]   major_collections: 2
[1][      debug]   compactions: 1
[1][      debug]   top_heap_words: 1331712
[1][      debug]   
[1][     result] 
src/vuln.c:22: error: Memory Leak
  Memory dynamically allocated by `malloc` on line 19 is not freed after the last access at line 22, column 5. 
  20.     }
  21.     // BUG: ptr might be NULL if trigger==0
  22.     ptr[0] = 'A';
          ^
  23. }
  24. 

src/vuln.c:30: error: Use After Free
  accessing `ptr` that was invalidated by call to `free()` on line 28. 
  28.     free(ptr);
  29.     // BUG: freeing already-freed memory
  30.     free(ptr);
          ^
  31. }
  32. 

src/vuln.c:40: error: Null Dereference
  The call to `null_deref_example` may trigger the following issue: `strcmp()` could be null (from the call to `null_deref_example()` on line 40) and is dereferenced in the call to `null_deref_example()`. 
  38.         use_after_free_example();
  39.     } else if (argc > 1 && strcmp(argv[1], "null") == 0) {
  40.         null_deref_example(0);
              ^
  41.     } else {
  42.         double_free_example();


Found 3 issues
             Issue Type(ISSUED_TYPE_ID): #
         Use After Free(USE_AFTER_FREE): 1
  Null Dereference(NULLPTR_DEREFERENCE): 1
             Memory Leak(MEMORY_LEAK_C): 1

[1][      debug] GC stats for report:
[1][      debug]   minor_words: 77212
[1][      debug]   promoted_words: 0
[1][      debug]   major_words: 2016
[1][      debug]   minor_collections: 0
[1][      debug]   major_collections: 0
[1][      debug]   compactions: 0
[1][      debug]   top_heap_words: 1331712
[1][      debug]   
[1][      debug] GC stats for main_process_full:
[1][      debug]   minor_words: 3.58121e+06
[1][      debug]   promoted_words: 895878
[1][      debug]   major_words: 1.26603e+06
[1][      debug]   minor_collections: 11
[1][      debug]   major_collections: 5
[1][      debug]   compactions: 2
[1][      debug]   top_heap_words: 1331712
[1][      debug]   
[1][      debug] Sqlite write daemon: waiting for process 7 to finish
[7][      debug] Detected 0 spec overwrites.
[7][      debug] Sqlite write daemon: terminating
[7][      debug] dbwriter.useful_time_user= 0.06543300
[7][      debug] dbwriter.useful_time_sys= 0.01000800
[7][      debug] dbwriter.useful_time_wall= 0.14222658
[7][      debug] dbwriter.useful_time_oncpu_pct= 53%
[7][      debug] dbwriter.store_sql_user= 0.00094400
[7][      debug] dbwriter.store_sql_sys= 0.00038500
[7][      debug] dbwriter.store_sql_wall= 0.00302900
[7][      debug] dbwriter.store_sql_oncpu_pct= 44%
[7][      debug] dbwriter.store_sql_pct= 2%
[7][      debug] dbwriter.total_time_user= 0.07323900
[7][      debug] dbwriter.total_time_sys= 0.01430900
[7][      debug] dbwriter.total_time_wall= 1.22284058
[7][      debug] dbwriter.total_time_oncpu_pct= 7%
[7][      debug] [1][      debug] Sqlite write daemon: process 7 terminated
