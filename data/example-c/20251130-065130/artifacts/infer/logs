[1][      debug] Sqlite write daemon: starting up
[1][      debug] Sqlite write daemon: set up complete, waiting for connections
[7][      debug] Sqlite write daemon: process starting, pid= 7
[1][environment] CWD = /build
[1][environment] No .inferconfig file found
[1][environment] Project root = /src
[1][environment] INFER_ARGS =   @/tmp/args.tmp.d0994c --progress-bar-style plain
[1][environment] command line arguments:   infer --reactive --keep-going --project-root=/src
[1][environment]                           -o /out
[1][environment]                           --compilation-database=/src/build/compile_commands.docker.json
[1][environment]                           --skip-analysis-in-path=/src/fuzz/packet_fuzzer.c
[1][environment]                           --skip-analysis-in-path=/src/fuzz/vuln_fuzzer.c
[1][environment] Available memory at startup: 28883 MB
[1][environment] Active checkers: self-in-block (C/C++/ObjC), parameter-not-null-checked (C/C++/ObjC), starvation (C/C++/ObjC, Java), siof (C/C++/ObjC), racerd (C/C++/ObjC, C#/.Net, Java), pulse (C/C++/ObjC, C#/.Net, Erlang, Hack, Java, Python), liveness (C/C++/ObjC), inefficient-keyset-iterator (Java), fragment-retains-view (Java)
[1][environment] Scheduler: restart
[1][environment] Cores used: 9
[1][environment] Infer version v1.2.0
[1][environment] Copyright 2009 - present Facebook. All Rights Reserved.
[1][environment] 
[1][   progress] Capturing using compilation database...
[1][      debug] parsing compilation database from /src/build/compile_commands.docker.json
[1][      debug] created database with 2 entries
[1][      debug] Starting translating 2 files
[1][      debug] 
[1][   progress] Starting translating 2 files
[1][   progress] 










[18][      debug] 
[18][      debug] *** Beginning capture of file /src/src/main.c ***
[18][      debug] Elapsed: 487ms.
[18][      debug] GC stats for capture:
[18][      debug]   minor_words: 659977
[18][      debug]   promoted_words: 226264
[18][      debug]   major_words: 237956
[18][      debug]   minor_collections: 1
[18][      debug]   major_collections: 0
[18][      debug]   compactions: 0
[18][      debug]   top_heap_words: 1006592
[18][      debug]   
[18][      debug] GC stats for main_process_full:
[18][      debug]   minor_words: 3.37949e+06
[18][      debug]   promoted_words: 933689
[18][      debug]   major_words: 983041
[18][      debug]   minor_collections: 9
[18][      debug]   major_collections: 1
[18][      debug]   compactions: 0
[18][      debug]   top_heap_words: 1006592
[18][      debug]   
[17][      debug] 
[17][      debug] *** Beginning capture of file /src/src/vuln.c ***
[17][      debug] Elapsed: 525ms.
[17][      debug] GC stats for capture:
[17][      debug]   minor_words: 952720
[17][      debug]   promoted_words: 258471
[17][      debug]   major_words: 272703
[17][      debug]   minor_collections: 2
[17][      debug]   major_collections: 0
[17][      debug]   compactions: 0
[17][      debug]   top_heap_words: 1157632
[17][      debug]   
[17][      debug] GC stats for main_process_full:
[17][      debug]   minor_words: 3.67224e+06
[17][      debug]   promoted_words: 965896
[17][      debug]   major_words: 1.01779e+06
[17][      debug]   minor_collections: 10
[17][      debug]   major_collections: 1
[17][      debug]   compactions: 0
[17][      debug]   top_heap_words: 1157632
[17][      debug]   

[1][      debug] GC stats for capture:
[1][      debug]   minor_words: 11795
[1][      debug]   promoted_words: 173129
[1][      debug]   major_words: 181836
[1][      debug]   minor_collections: 2
[1][      debug]   major_collections: 2
[1][      debug]   compactions: 1
[1][      debug]   top_heap_words: 1006592
[1][      debug]   
[1][environment] Parallel jobs: 9
[1][   progress] Found 2 (out of 2) source files to analyze in /out
[34][   progress] src/vuln.c starting
[35][   progress] src/main.c starting
[33][   progress] Analysing block of 200 procs, starting with use_after_free_example
[27][   progress] Analysing block of 200 procs, starting with double_free_example
[28][   progress] Analysing block of 200 procs, starting with process_packet
[31][   progress] Analysing block of 200 procs, starting with log_message
[30][   progress] Analysing block of 200 procs, starting with null_deref_example
[32][   progress] Analysing block of 200 procs, starting with main
[29][   progress] Analysing block of 200 procs, starting with resize_buffer
[34][   progress] src/vuln.c DONE
[35][   progress] src/main.c DONE
[34][   progress] Analysing block of 200 procs, starting with main
[27][   progress] src/vuln.c starting
[29][   progress] src/main.c starting
[29][   progress] src/main.c DONE
[27][   progress] src/vuln.c DONE
[28][   progress] src/main.c starting
[28][   progress] src/main.c DONE
[27][   progress] src/main.c starting
[29][   progress] src/vuln.c starting
[27][   progress] src/main.c DONE
[29][   progress] src/vuln.c DONE
[27][   progress] src/main.c starting
[27][   progress] src/main.c DONE
[1][      debug] Backend stats:
[1][      debug]   summary_file_try_load= 161
[1][      debug]   summary_read_from_disk= 25
[1][      debug]   summary_cache_hits= 25 (13%)
[1][      debug]   summary_cache_misses= 161
[1][      debug]   ondemand_procs_analyzed= 7
[1][      debug]   proc_locker_lock_time_user= 0.01080000
[1][      debug]   proc_locker_lock_time_sys= 0.00263700
[1][      debug]   proc_locker_lock_time_wall= 0.11464517
[1][      debug]   proc_locker_lock_time_oncpu_pct= 12%
[1][      debug]   proc_locker_unlock_time_user= 0.00074100
[1][      debug]   proc_locker_unlock_time_sys= 0.00007100
[1][      debug]   proc_locker_unlock_time_wall= 0.02577121
[1][      debug]   proc_locker_unlock_time_oncpu_pct= 3%
[1][      debug]   restart_scheduler_useful_time_user= 1.04266400
[1][      debug]   restart_scheduler_useful_time_sys= 0.07493200
[1][      debug]   restart_scheduler_useful_time_wall= 1.26076083
[1][      debug]   restart_scheduler_useful_time_oncpu_pct= 89%
[1][      debug]   restart_scheduler_total_time_user= 1.10176500
[1][      debug]   restart_scheduler_total_time_sys= 0.08251300
[1][      debug]   restart_scheduler_total_time_wall= 1.34634450
[1][      debug]   restart_scheduler_total_time_oncpu_pct= 88%
[1][      debug]   pulse_aliasing_contradictions= 0
[1][      debug]   pulse_args_length_contradictions= 0
[1][      debug]   pulse_captured_vars_length_contradictions= 0
[1][      debug]   pulse_disjuncts_dropped= 4
[1][      debug]   pulse_interrupted_loops= 1
[1][      debug]   pulse_summaries_contradictions= 0
[1][      debug]   pulse_summaries_unsat_for_caller= 5
[1][      debug]   pulse_summaries_unsat_for_caller_percent= 71
[1][      debug]   pulse_summaries_with_some_unreachable_nodes= 1
[1][      debug]   pulse_summaries_with_some_unreachable_nodes_percent= 14
[1][      debug]   pulse_summaries_with_some_unreachable_returns= 0
[1][      debug]   pulse_summaries_with_some_unreachable_returns_percent= 0.0%
[1][      debug]   pulse_summaries_count= [2 -> 2, 3 -> 1, 5 -> 1, 8 -> 1, 14 -> 1, 20 -> 1]
[1][      debug]   pulse_summaries_total_disjuncts= 54
[1][      debug]   pulse_summaries_count_0_continue_program= 0
[1][      debug]   pulse_summaries_count_0_percent= 0
[1][      debug]   topl_reachable_calls= 0
[1][      debug]   timeouts= 0
[1][      debug]   timings= timings for liveness:
[1][      debug]     p10: 0.000555s p20: 0.002111s p30: 0.002512s p40: 0.002635s
[1][      debug]     p50: 0.002641s p60: 0.002656s p70: 0.002664s p80: 0.004511s
[1][      debug]     p90: 0.017434s p95: 0.021126s p96: 0.021126s p97: 0.021126s
[1][      debug]     p98: 0.021126s p99: 0.021126s p99.9: 0.021126s p99.99: 0.021126s 
[1][      debug]   timings for parameter-not-null-checked:
[1][      debug]     p10: 0.000096s p20: 0.000435s p30: 0.000820s p40: 0.001188s
[1][      debug]     p50: 0.001262s p60: 0.001326s p70: 0.001364s p80: 0.002163s
[1][      debug]     p90: 0.005897s p95: 0.008698s p96: 0.008953s p97: 0.008953s
[1][      debug]     p98: 0.008953s p99: 0.008953s p99.9: 0.008953s p99.99: 0.008953s 
[1][      debug]   timings for pulse:
[1][      debug]     p10: 0.024993s p20: 0.028205s p30: 0.029138s p40: 0.030839s
[1][      debug]     p50: 0.034069s p60: 0.067402s p70: 0.084513s p80: 0.090670s
[1][      debug]     p90: 0.104101s p95: 0.107938s p96: 0.107938s p97: 0.107938s
[1][      debug]     p98: 0.107938s p99: 0.107938s p99.9: 0.107938s p99.99: 0.107938s 
[1][      debug]   timings for racerd:
[1][      debug]     p10: 0.001381s p20: 0.002961s p30: 0.003236s p40: 0.003372s
[1][      debug]     p50: 0.003612s p60: 0.003616s p70: 0.004060s p80: 0.004725s
[1][      debug]     p90: 0.004748s p95: 0.004754s p96: 0.004754s p97: 0.004754s
[1][      debug]     p98: 0.004754s p99: 0.004754s p99.9: 0.004754s p99.99: 0.004754s 
[1][      debug]   timings for self-in-block:
[1][      debug]     p10: 0.000003s p20: 0.000031s p30: 0.000062s p40: 0.000063s
[1][      debug]     p50: 0.000066s p60: 0.000077s p70: 0.000100s p80: 0.000135s
[1][      debug]     p90: 0.000334s p95: 0.000607s p96: 0.000632s p97: 0.000632s
[1][      debug]     p98: 0.000632s p99: 0.000632s p99.9: 0.000632s p99.99: 0.000632s 
[1][      debug]   timings for siof:
[1][      debug]     p10: 0.000858s p20: 0.001350s p30: 0.001456s p40: 0.001506s
[1][      debug]     p50: 0.001568s p60: 0.001599s p70: 0.001793s p80: 0.002282s
[1][      debug]     p90: 0.003810s p95: 0.004247s p96: 0.004247s p97: 0.004247s
[1][      debug]     p98: 0.004247s p99: 0.004247s p99.9: 0.004247s p99.99: 0.004247s 
[1][      debug]   timings for starvation:
[1][      debug]     p10: 0.000938s p20: 0.002501s p30: 0.003306s p40: 0.004944s
[1][      debug]     p50: 0.005756s p60: 0.006038s p70: 0.007177s p80: 0.008212s
[1][      debug]     p90: 0.008593s p95: 0.008790s p96: 0.008808s p97: 0.008808s
[1][      debug]     p98: 0.008808s p99: 0.008808s p99.9: 0.008808s p99.99: 0.008808s 
[1][      debug]   timings for preanalysis:
[1][      debug]     p10: 0.000530s p20: 0.005156s p30: 0.007139s p40: 0.014254s
[1][      debug]     p50: 0.072193s p60: 0.074342s p70: 0.077191s p80: 0.087690s
[1][      debug]     p90: 0.094136s p95: 0.097441s p96: 0.097741s p97: 0.097741s
[1][      debug]     p98: 0.097741s p99: 0.097741s p99.9: 0.097741s p99.99: 0.097741s 
[1][      debug]   
[1][      debug]   longest_proc_duration_heap= [
[1][      debug]   234026us: src/vuln.c: log_message
[1][      debug]   206888us: src/vuln.c: process_packet
[1][      debug]   205597us: src/vuln.c: use_after_free_example
[1][      debug]   200879us: src/vuln.c: double_free_example
[1][      debug]   198472us: src/vuln.c: resize_buffer
[1][      debug]   161402us: src/vuln.c: null_deref_example
[1][      debug]   34624us: src/main.c: main
[1][      debug]   ]
[1][      debug]   process_times_user= 1.15234700
[1][      debug]   process_times_sys= 0.09880500
[1][      debug]   process_times_wall= 2.90939421
[1][      debug]   process_times_oncpu_pct= 43%
[1][      debug]   useful_times_user= 1.14961500
[1][      debug]   useful_times_sys= 0.09713100
[1][      debug]   useful_times_wall= 1.59031450
[1][      debug]   useful_times_oncpu_pct= 78%
[1][      debug]   spec_store_times_user= 0.43370600
[1][      debug]   spec_store_times_sys= 0.00447100
[1][      debug]   spec_store_times_wall= 0.55863554
[1][      debug]   spec_store_times_oncpu_pct= 78%
[1][      debug]   
[1][      debug] GC stats for backend_stats.gc_stats_add.:
[1][      debug]   minor_words: 1.04313e+07
[1][      debug]   promoted_words: 868121
[1][      debug]   major_words: 976745
[1][      debug]   minor_collections: 6
[1][      debug]   major_collections: 0
[1][      debug]   compactions: 0
[1][      debug]   top_heap_words: 10060800
[1][      debug]   
[1][      debug] GC stats for backend_stats.gc_stats_max.:
[1][      debug]   minor_words: 4.53442e+06
[1][      debug]   promoted_words: 411371
[1][      debug]   major_words: 453887
[1][      debug]   minor_collections: 4
[1][      debug]   major_collections: 0
[1][      debug]   compactions: 0
[1][      debug]   top_heap_words: 1531904
[1][      debug]   
[1][      debug] Average over 9 processes
[1][      debug] GC stats for backend_stats.gc_stats_average.:
[1][      debug]   minor_words: 1.15904e+06
[1][      debug]   promoted_words: 96457.9
[1][      debug]   major_words: 108527
[1][      debug]   minor_collections: 0
[1][      debug]   major_collections: 0
[1][      debug]   compactions: 0
[1][      debug]   top_heap_words: 1117866
[1][      debug]   
[1][      debug] Analysis phase finished in 361ms
[1][      debug] backend_stats.scheduler_process_analysis_time_user= 0.04252400
[1][      debug] backend_stats.scheduler_process_analysis_time_sys= 0.01869800
[1][      debug] backend_stats.scheduler_process_analysis_time_wall= 0.36019062
[1][      debug] backend_stats.scheduler_process_analysis_time_oncpu_pct= 17%
[1][      debug] GC stats for analysis_scheduler:
[1][      debug]   minor_words: 578625
[1][      debug]   promoted_words: 2363
[1][      debug]   major_words: 321946
[1][      debug]   minor_collections: 1
[1][      debug]   major_collections: 2
[1][      debug]   compactions: 1
[1][      debug]   top_heap_words: 1331712
[1][      debug]   
[1][     result] 
src/main.c:22: error: Null Dereference
  The call to `null_deref_example` may trigger the following issue: `strcmp()` could be null (from the call to `null_deref_example()` on line 22) and is dereferenced in the call to `null_deref_example()`. 
  20.         use_after_free_example();
  21.     } else if (strcmp(argv[1], "null") == 0) {
  22.         null_deref_example(0);
              ^
  23.     } else if (strcmp(argv[1], "double") == 0) {
  24.         double_free_example();

src/vuln.c:36: error: Memory Leak
  Memory dynamically allocated by `malloc` on line 33 is not freed after the last access at line 36, column 5. 
  34.     }
  35.     // BUG: ptr might be NULL if trigger==0
  36.     ptr[0] = 'A';
          ^
  37. }
  38. 

src/vuln.c:46: error: Use After Free
  accessing `ptr` that was invalidated by call to `free()` on line 44. 
  44.     free(ptr);
  45.     // BUG: freeing already-freed memory
  46.     free(ptr);
          ^
  47. }
  48. 


Found 3 issues
             Issue Type(ISSUED_TYPE_ID): #
         Use After Free(USE_AFTER_FREE): 1
  Null Dereference(NULLPTR_DEREFERENCE): 1
             Memory Leak(MEMORY_LEAK_C): 1

[1][      debug] GC stats for report:
[1][      debug]   minor_words: 78432
[1][      debug]   promoted_words: 0
[1][      debug]   major_words: 2016
[1][      debug]   minor_collections: 0
[1][      debug]   major_collections: 0
[1][      debug]   compactions: 0
[1][      debug]   top_heap_words: 1331712
[1][      debug]   
[1][      debug] GC stats for main_process_full:
[1][      debug]   minor_words: 3.63649e+06
[1][      debug]   promoted_words: 896509
[1][      debug]   major_words: 1.27218e+06
[1][      debug]   minor_collections: 11
[1][      debug]   major_collections: 5
[1][      debug]   compactions: 2
[1][      debug]   top_heap_words: 1331712
[1][      debug]   
[1][      debug] Sqlite write daemon: waiting for process 7 to finish
[7][      debug] Detected 0 spec overwrites.
[7][      debug] Sqlite write daemon: terminating
[7][      debug] dbwriter.useful_time_user= 0.07956500
[7][      debug] dbwriter.useful_time_sys= 0.00613700
[7][      debug] dbwriter.useful_time_wall= 0.20150134
[7][      debug] dbwriter.useful_time_oncpu_pct= 43%
[7][      debug] dbwriter.store_sql_user= 0.00219300
[7][      debug] dbwriter.store_sql_sys= 0.00023500
[7][      debug] dbwriter.store_sql_wall= 0.00695275
[7][      debug] dbwriter.store_sql_oncpu_pct= 35%
[7][      debug] dbwriter.store_sql_pct= 3%
[7][      debug] dbwriter.total_time_user= 0.08541700
[7][      debug] dbwriter.total_time_sys= 0.01334000
[7][      debug] dbwriter.total_time_wall= 1.52820508
[7][      debug] dbwriter.total_time_oncpu_pct= 6%
[7][      debug] [1][      debug] Sqlite write daemon: process 7 terminated
