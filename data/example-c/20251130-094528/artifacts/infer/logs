[1][      debug] Sqlite write daemon: starting up
[1][      debug] Sqlite write daemon: set up complete, waiting for connections
[7][      debug] Sqlite write daemon: process starting, pid= 7
[1][environment] CWD = /build
[1][environment] No .inferconfig file found
[1][environment] Project root = /src
[1][environment] INFER_ARGS =   @/tmp/args.tmp.0445c0 --progress-bar-style plain
[1][environment] command line arguments:   infer --reactive --keep-going --project-root=/src
[1][environment]                           -o /out
[1][environment]                           --compilation-database=/src/build/compile_commands.docker.json
[1][environment]                           --skip-analysis-in-path=/src/fuzz/packet_fuzzer.c
[1][environment]                           --skip-analysis-in-path=/src/fuzz/vuln_fuzzer.c
[1][environment] Available memory at startup: 28938 MB
[1][environment] Active checkers: self-in-block (C/C++/ObjC), parameter-not-null-checked (C/C++/ObjC), starvation (C/C++/ObjC, Java), siof (C/C++/ObjC), racerd (C/C++/ObjC, C#/.Net, Java), pulse (C/C++/ObjC, C#/.Net, Erlang, Hack, Java, Python), liveness (C/C++/ObjC), inefficient-keyset-iterator (Java), fragment-retains-view (Java)
[1][environment] Scheduler: restart
[1][environment] Cores used: 9
[1][environment] Infer version v1.2.0
[1][environment] Copyright 2009 - present Facebook. All Rights Reserved.
[1][environment] 
[1][   progress] Capturing using compilation database...
[1][      debug] parsing compilation database from /src/build/compile_commands.docker.json
[1][      debug] created database with 2 entries
[1][      debug] Starting translating 2 files
[1][      debug] 
[1][   progress] Starting translating 2 files
[1][   progress] 










[17][      debug] 
[17][      debug] *** Beginning capture of file /src/src/main.c ***
[17][      debug] Elapsed: 338ms.
[17][      debug] GC stats for capture:
[17][      debug]   minor_words: 659977
[17][      debug]   promoted_words: 226264
[17][      debug]   major_words: 237956
[17][      debug]   minor_collections: 1
[17][      debug]   major_collections: 0
[17][      debug]   compactions: 0
[17][      debug]   top_heap_words: 1006592
[17][      debug]   
[17][      debug] GC stats for main_process_full:
[17][      debug]   minor_words: 3.37949e+06
[17][      debug]   promoted_words: 933689
[17][      debug]   major_words: 983041
[17][      debug]   minor_collections: 9
[17][      debug]   major_collections: 1
[17][      debug]   compactions: 0
[17][      debug]   top_heap_words: 1006592
[17][      debug]   
[18][      debug] 
[18][      debug] *** Beginning capture of file /src/src/vuln.c ***
[18][      debug] Elapsed: 343ms.
[18][      debug] GC stats for capture:
[18][      debug]   minor_words: 952720
[18][      debug]   promoted_words: 258471
[18][      debug]   major_words: 272703
[18][      debug]   minor_collections: 2
[18][      debug]   major_collections: 0
[18][      debug]   compactions: 0
[18][      debug]   top_heap_words: 1157632
[18][      debug]   
[18][      debug] GC stats for main_process_full:
[18][      debug]   minor_words: 3.67224e+06
[18][      debug]   promoted_words: 965896
[18][      debug]   major_words: 1.01779e+06
[18][      debug]   minor_collections: 10
[18][      debug]   major_collections: 1
[18][      debug]   compactions: 0
[18][      debug]   top_heap_words: 1157632
[18][      debug]   

[1][      debug] GC stats for capture:
[1][      debug]   minor_words: 11707
[1][      debug]   promoted_words: 173129
[1][      debug]   major_words: 181836
[1][      debug]   minor_collections: 2
[1][      debug]   major_collections: 2
[1][      debug]   compactions: 1
[1][      debug]   top_heap_words: 1006592
[1][      debug]   
[1][environment] Parallel jobs: 9
[1][   progress] Found 2 (out of 2) source files to analyze in /out
[35][   progress] src/main.c starting
[34][   progress] src/vuln.c starting
[27][   progress] Analysing block of 200 procs, starting with double_free_example
[31][   progress] Analysing block of 200 procs, starting with log_message
[29][   progress] Analysing block of 200 procs, starting with resize_buffer
[32][   progress] Analysing block of 200 procs, starting with main
[30][   progress] Analysing block of 200 procs, starting with null_deref_example
[28][   progress] Analysing block of 200 procs, starting with process_packet
[33][   progress] Analysing block of 200 procs, starting with use_after_free_example
[35][   progress] src/main.c DONE
[29][   progress] src/main.c starting
[34][   progress] src/vuln.c DONE
[28][   progress] src/vuln.c starting
[28][   progress] src/vuln.c DONE
[29][   progress] src/main.c DONE
[1][      debug] Backend stats:
[1][      debug]   summary_file_try_load= 136
[1][      debug]   summary_read_from_disk= 17
[1][      debug]   summary_cache_hits= 25 (15%)
[1][      debug]   summary_cache_misses= 136
[1][      debug]   ondemand_procs_analyzed= 7
[1][      debug]   proc_locker_lock_time_user= 0.00375500
[1][      debug]   proc_locker_lock_time_sys= 0.00232400
[1][      debug]   proc_locker_lock_time_wall= 0.02166292
[1][      debug]   proc_locker_lock_time_oncpu_pct= 28%
[1][      debug]   proc_locker_unlock_time_user= 0.00057900
[1][      debug]   proc_locker_unlock_time_sys= 0.00012800
[1][      debug]   proc_locker_unlock_time_wall= 0.00689075
[1][      debug]   proc_locker_unlock_time_oncpu_pct= 10%
[1][      debug]   restart_scheduler_useful_time_user= 1.04867200
[1][      debug]   restart_scheduler_useful_time_sys= 0.10707900
[1][      debug]   restart_scheduler_useful_time_wall= 1.39617779
[1][      debug]   restart_scheduler_useful_time_oncpu_pct= 83%
[1][      debug]   restart_scheduler_total_time_user= 1.07865000
[1][      debug]   restart_scheduler_total_time_sys= 0.11517100
[1][      debug]   restart_scheduler_total_time_wall= 1.43451071
[1][      debug]   restart_scheduler_total_time_oncpu_pct= 83%
[1][      debug]   pulse_aliasing_contradictions= 0
[1][      debug]   pulse_args_length_contradictions= 0
[1][      debug]   pulse_captured_vars_length_contradictions= 0
[1][      debug]   pulse_disjuncts_dropped= 4
[1][      debug]   pulse_interrupted_loops= 1
[1][      debug]   pulse_summaries_contradictions= 0
[1][      debug]   pulse_summaries_unsat_for_caller= 5
[1][      debug]   pulse_summaries_unsat_for_caller_percent= 71
[1][      debug]   pulse_summaries_with_some_unreachable_nodes= 1
[1][      debug]   pulse_summaries_with_some_unreachable_nodes_percent= 14
[1][      debug]   pulse_summaries_with_some_unreachable_returns= 0
[1][      debug]   pulse_summaries_with_some_unreachable_returns_percent= 0.0%
[1][      debug]   pulse_summaries_count= [2 -> 2, 3 -> 1, 5 -> 1, 8 -> 1, 14 -> 1, 20 -> 1]
[1][      debug]   pulse_summaries_total_disjuncts= 54
[1][      debug]   pulse_summaries_count_0_continue_program= 0
[1][      debug]   pulse_summaries_count_0_percent= 0
[1][      debug]   topl_reachable_calls= 0
[1][      debug]   timeouts= 0
[1][      debug]   timings= timings for liveness:
[1][      debug]     p10: 0.000642s p20: 0.001892s p30: 0.002248s p40: 0.002446s
[1][      debug]     p50: 0.002634s p60: 0.002782s p70: 0.002893s p80: 0.003085s
[1][      debug]     p90: 0.003937s p95: 0.004180s p96: 0.004180s p97: 0.004180s
[1][      debug]     p98: 0.004180s p99: 0.004180s p99.9: 0.004180s p99.99: 0.004180s 
[1][      debug]   timings for parameter-not-null-checked:
[1][      debug]     p10: 0.000041s p20: 0.000154s p30: 0.000355s p40: 0.000702s
[1][      debug]     p50: 0.000997s p60: 0.001402s p70: 0.001478s p80: 0.001719s
[1][      debug]     p90: 0.001860s p95: 0.001887s p96: 0.001887s p97: 0.001887s
[1][      debug]     p98: 0.001887s p99: 0.001887s p99.9: 0.001887s p99.99: 0.001887s 
[1][      debug]   timings for pulse:
[1][      debug]     p10: 0.028537s p20: 0.040561s p30: 0.046636s p40: 0.050604s
[1][      debug]     p50: 0.053088s p60: 0.075032s p70: 0.085534s p80: 0.088346s
[1][      debug]     p90: 0.096504s p95: 0.098835s p96: 0.098835s p97: 0.098835s
[1][      debug]     p98: 0.098835s p99: 0.098835s p99.9: 0.098835s p99.99: 0.098835s 
[1][      debug]   timings for racerd:
[1][      debug]     p10: 0.001482s p20: 0.003450s p30: 0.003851s p40: 0.004153s
[1][      debug]     p50: 0.004672s p60: 0.004797s p70: 0.005566s p80: 0.007843s
[1][      debug]     p90: 0.016267s p95: 0.018674s p96: 0.018674s p97: 0.018674s
[1][      debug]     p98: 0.018674s p99: 0.018674s p99.9: 0.018674s p99.99: 0.018674s 
[1][      debug]   timings for self-in-block:
[1][      debug]     p10: 0.000002s p20: 0.000018s p30: 0.000050s p40: 0.000057s
[1][      debug]     p50: 0.000066s p60: 0.000076s p70: 0.000095s p80: 0.000113s
[1][      debug]     p90: 0.000123s p95: 0.000128s p96: 0.000128s p97: 0.000128s
[1][      debug]     p98: 0.000128s p99: 0.000128s p99.9: 0.000128s p99.99: 0.000128s 
[1][      debug]   timings for siof:
[1][      debug]     p10: 0.000571s p20: 0.001073s p30: 0.001416s p40: 0.001603s
[1][      debug]     p50: 0.001618s p60: 0.001654s p70: 0.001861s p80: 0.002352s
[1][      debug]     p90: 0.003763s p95: 0.004166s p96: 0.004166s p97: 0.004166s
[1][      debug]     p98: 0.004166s p99: 0.004166s p99.9: 0.004166s p99.99: 0.004166s 
[1][      debug]   timings for starvation:
[1][      debug]     p10: 0.003266s p20: 0.003537s p30: 0.003892s p40: 0.004185s
[1][      debug]     p50: 0.004585s p60: 0.004854s p70: 0.005498s p80: 0.005912s
[1][      debug]     p90: 0.006608s p95: 0.006997s p96: 0.006997s p97: 0.006997s
[1][      debug]     p98: 0.006997s p99: 0.006997s p99.9: 0.006997s p99.99: 0.006997s 
[1][      debug]   timings for preanalysis:
[1][      debug]     p10: 0.002956s p20: 0.005820s p30: 0.019004s p40: 0.070736s
[1][      debug]     p50: 0.070895s p60: 0.071352s p70: 0.077317s p80: 0.085246s
[1][      debug]     p90: 0.097571s p95: 0.103945s p96: 0.103945s p97: 0.103945s
[1][      debug]     p98: 0.103945s p99: 0.103945s p99.9: 0.103945s p99.99: 0.103945s 
[1][      debug]   
[1][      debug]   longest_proc_duration_heap= [
[1][      debug]   225510us: src/vuln.c: process_packet
[1][      debug]   223778us: src/vuln.c: log_message
[1][      debug]   221054us: src/vuln.c: use_after_free_example
[1][      debug]   221032us: src/vuln.c: resize_buffer
[1][      debug]   219283us: src/vuln.c: null_deref_example
[1][      debug]   216978us: src/vuln.c: double_free_example
[1][      debug]   57496us: src/main.c: main
[1][      debug]   ]
[1][      debug]   process_times_user= 1.11586300
[1][      debug]   process_times_sys= 0.13119900
[1][      debug]   process_times_wall= 2.94112375
[1][      debug]   process_times_oncpu_pct= 42%
[1][      debug]   useful_times_user= 1.11343200
[1][      debug]   useful_times_sys= 0.12973500
[1][      debug]   useful_times_wall= 1.52346008
[1][      debug]   useful_times_oncpu_pct= 82%
[1][      debug]   spec_store_times_user= 0.44333000
[1][      debug]   spec_store_times_sys= 0.00390000
[1][      debug]   spec_store_times_wall= 0.68581204
[1][      debug]   spec_store_times_oncpu_pct= 65%
[1][      debug]   
[1][      debug] GC stats for backend_stats.gc_stats_add.:
[1][      debug]   minor_words: 1.04747e+07
[1][      debug]   promoted_words: 1.11645e+06
[1][      debug]   major_words: 1.19483e+06
[1][      debug]   minor_collections: 6
[1][      debug]   major_collections: 0
[1][      debug]   compactions: 0
[1][      debug]   top_heap_words: 10234880
[1][      debug]   
[1][      debug] GC stats for backend_stats.gc_stats_max.:
[1][      debug]   minor_words: 5.13481e+06
[1][      debug]   promoted_words: 418505
[1][      debug]   major_words: 449642
[1][      debug]   minor_collections: 4
[1][      debug]   major_collections: 0
[1][      debug]   compactions: 0
[1][      debug]   top_heap_words: 1531904
[1][      debug]   
[1][      debug] Average over 9 processes
[1][      debug] GC stats for backend_stats.gc_stats_average.:
[1][      debug]   minor_words: 1.16386e+06
[1][      debug]   promoted_words: 124050
[1][      debug]   major_words: 132759
[1][      debug]   minor_collections: 0
[1][      debug]   major_collections: 0
[1][      debug]   compactions: 0
[1][      debug]   top_heap_words: 1137208
[1][      debug]   
[1][      debug] Analysis phase finished in 363ms
[1][      debug] backend_stats.scheduler_process_analysis_time_user= 0.02968600
[1][      debug] backend_stats.scheduler_process_analysis_time_sys= 0.02153100
[1][      debug] backend_stats.scheduler_process_analysis_time_wall= 0.36240071
[1][      debug] backend_stats.scheduler_process_analysis_time_oncpu_pct= 14%
[1][      debug] GC stats for analysis_scheduler:
[1][      debug]   minor_words: 569390
[1][      debug]   promoted_words: 2363
[1][      debug]   major_words: 321891
[1][      debug]   minor_collections: 1
[1][      debug]   major_collections: 2
[1][      debug]   compactions: 1
[1][      debug]   top_heap_words: 1331712
[1][      debug]   
[1][     result] 
src/main.c:22: error: Null Dereference
  The call to `null_deref_example` may trigger the following issue: `strcmp()` could be null (from the call to `null_deref_example()` on line 22) and is dereferenced in the call to `null_deref_example()`. 
  20.         use_after_free_example();
  21.     } else if (strcmp(argv[1], "null") == 0) {
  22.         null_deref_example(0);
              ^
  23.     } else if (strcmp(argv[1], "double") == 0) {
  24.         double_free_example();

src/vuln.c:36: error: Memory Leak
  Memory dynamically allocated by `malloc` on line 33 is not freed after the last access at line 36, column 5. 
  34.     }
  35.     // BUG: ptr might be NULL if trigger==0
  36.     ptr[0] = 'A';
          ^
  37. }
  38. 

src/vuln.c:46: error: Use After Free
  accessing `ptr` that was invalidated by call to `free()` on line 44. 
  44.     free(ptr);
  45.     // BUG: freeing already-freed memory
  46.     free(ptr);
          ^
  47. }
  48. 


Found 3 issues
             Issue Type(ISSUED_TYPE_ID): #
         Use After Free(USE_AFTER_FREE): 1
  Null Dereference(NULLPTR_DEREFERENCE): 1
             Memory Leak(MEMORY_LEAK_C): 1

[1][      debug] GC stats for report:
[1][      debug]   minor_words: 78432
[1][      debug]   promoted_words: 0
[1][      debug]   major_words: 2016
[1][      debug]   minor_collections: 0
[1][      debug]   major_collections: 0
[1][      debug]   compactions: 0
[1][      debug]   top_heap_words: 1331712
[1][      debug]   
[1][      debug] GC stats for main_process_full:
[1][      debug]   minor_words: 3.62717e+06
[1][      debug]   promoted_words: 896509
[1][      debug]   major_words: 1.27213e+06
[1][      debug]   minor_collections: 11
[1][      debug]   major_collections: 5
[1][      debug]   compactions: 2
[1][      debug]   top_heap_words: 1331712
[1][      debug]   
[1][      debug] Sqlite write daemon: waiting for process 7 to finish
[7][      debug] Detected 0 spec overwrites.
[7][      debug] Sqlite write daemon: terminating
[7][      debug] dbwriter.useful_time_user= 0.07074400
[7][      debug] dbwriter.useful_time_sys= 0.01058400
[7][      debug] dbwriter.useful_time_wall= 0.19803500
[7][      debug] dbwriter.useful_time_oncpu_pct= 41%
[7][      debug] dbwriter.store_sql_user= 0.00120900
[7][      debug] dbwriter.store_sql_sys= 0.00111100
[7][      debug] dbwriter.store_sql_wall= 0.00833063
[7][      debug] dbwriter.store_sql_oncpu_pct= 28%
[7][      debug] dbwriter.store_sql_pct= 3%
[7][      debug] dbwriter.total_time_user= 0.07864700
[7][      debug] dbwriter.total_time_sys= 0.02139900
[7][      debug] dbwriter.total_time_wall= 1.31933592
[7][      debug] dbwriter.total_time_oncpu_pct= 8%
[7][      debug] [1][      debug] Sqlite write daemon: process 7 terminated
